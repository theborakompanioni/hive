!function(a,b,c){"use strict";var d={position:c,showNotation:!0,orientation:"white",draggable:!1,dropOffBoard:"snapback",appearSpeed:200,moveSpeed:200,snapbackSpeed:50,snapSpeed:25,trashSpeed:100,sparePieces:!1,showErrors:!1,pieceTheme:c,onDragStart:angular.noop,onDrop:angular.noop,onSnapEnd:angular.noop,onChange:angular.noop,onDragMove:angular.noop,onSnapbackEnd:angular.noop,onMoveEnd:angular.noop,onMouseoutSquare:angular.noop,onMouseoverSquare:angular.noop};angular.module("nywton.chessboard",[]).value("nywtonChessboardDefaultConfig",angular.copy(d)).provider("nywtonChessboardConfig",[function(){var a={},b=this;angular.forEach(d,function(c,d){b[d]=function(c){return a[d]=c,b}}),this.$get=["nywtonChessboardDefaultConfig",function(b){return angular.extend(b,a)}]}]).config(["nywtonChessboardConfigProvider",function(a){a.position("empty").orientation("white")}]).directive("nywtonChessboard",["$window","$log","$timeout","nywtonChessboardConfig",function(a,c,d,e){var f=["draggable","dropOffBoard","position","orientation","showNotation","sparePieces","showErrors","pieceTheme","appearSpeed","moveSpeed","snapbackSpeed","snapSpeed","trashSpeed"],g=["onChange","onDragStart","onDragMove","onDrop","onSnapbackEnd","onMoveEnd","onMouseoutSquare","onMouseoverSquare","onSnapEnd"],h={restrict:"EA",scope:{name:"@",board:"=?",onChange:"&",onDragMove:"&",onDrop:"&",onSnapbackEnd:"&",onMoveEnd:"&",onMouseoutSquare:"&",onMouseoverSquare:"&",onSnapEnd:"&",onDragStart:"&onDragStartCb"},priority:1e3,template:"<div></div>",controller:["$scope",function(a){var b=this,d=[];a.name=a.name||"board"+a.$id,this.config_push=function(a){angular.isArray(a)&&2===a.length&&angular.isString(a[0])&&!angular.isUndefined(a[1])&&d.push(a)},this.config=function(){var a={};angular.forEach(d,function(b){a[b[0]]=b[1]});var b=angular.extend(angular.copy(e),a);return c.debug(b),b},this.board=function(){return a.board};var f=function(){return a.$$phase||a.$root.$$phase?0:a.$parent.$digest()},h=function(a,b){return a.$$phase||a.$root.$$phase?b():a.$apply(b)},i=!0,j=function(b){return function(){var c=arguments;return h(a.$parent,function(){return b.apply(this,c)})}};angular.forEach(g,function(c){if(angular.isFunction(a[c])){var d=a[c]();if(angular.isFunction(d)){var e=i?j(d):d;b.config_push([c,e])}else b.config_push([c,f])}})}],link:function(a,d,e,g){angular.forEach(f,function(b){c.debug("attr: "+b+" = "+a.$eval(e[b])),e.hasOwnProperty(b)&&g.config_push([b,a.$eval(e[b])])});var h=g.config(),i=angular.element("<div></div>");d.prepend(i),a.board=new b(i,h),a.board.name=a.name||"board"+a.$id,a.$on("$destroy",function(){a.board.destroy()})}};return h}]).directive("nywtonPositionRuyLopez",[function(){var a={restrict:"A",priority:1,require:"nywtonChessboard",link:function(a,b,c,d){d.config_push(["position","r1bqkbnr/pppp1ppp/2n5/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R"])}};return a}]).directive("nywtonPositionStart",[function(){var a={restrict:"A",priority:1,require:"nywtonChessboard",link:function(a,b,c,d){d.config_push(["position","start"])}};return a}]).directive("nywtonChessboardAutoresize",["$window","$timeout",function(a,b){var c={restrict:"A",priority:1,require:"nywtonChessboard",link:function(c,d,e,f){var g,h=function(){angular.isDefined(f.board())&&f.board().resize()};angular.element(a).bind("resize",function(){b.cancel(g),g=b(h,113)}),c.$on("$destroy",function(){b.cancel(g)})}};return c}])}(window,ChessBoard);